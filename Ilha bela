-- =====================================
-- BOX ESP | RONIX MOBILE (FIX REAL)
-- Auto ON
-- =====================================

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

local ESP = {}

-- Criar quadrado
local function newSquare()
    local s = Drawing.new("Square")
    s.Color = Color3.fromRGB(255, 0, 0)
    s.Thickness = 2
    s.Filled = false
    s.Transparency = 1
    s.Visible = false
    return s
end

-- Criar ESP no player
local function addPlayer(plr)
    if plr == LocalPlayer then return end
    ESP[plr] = newSquare()
end

-- Remover ESP
local function removePlayer(plr)
    if ESP[plr] then
        ESP[plr]:Remove()
        ESP[plr] = nil
    end
end

-- Inicializar
for _, plr in ipairs(Players:GetPlayers()) do
    addPlayer(plr)
end

-- Atualizar
RunService.RenderStepped:Connect(function()
    for plr, box in pairs(ESP) do
        local char = plr.Character
        local hrp = char and char:FindFirstChild("HumanoidRootPart")
        local hum = char and char:FindFirstChildOfClass("Humanoid")

        if hrp and hum and hum.Health > 0 then
            local pos, onscreen = Camera:WorldToViewportPoint(hrp.Position)
            if onscreen then
                local size = math.clamp(2000 / (pos.Z), 20, 200)

                box.Size = Vector2.new(size, size * 1.5)
                box.Position = Vector2.new(
                    pos.X - box.Size.X / 2,
                    pos.Y - box.Size.Y / 2
                )
                box.Visible = true
            else
                box.Visible = false
            end
        else
            box.Visible = false
        end
    end
end)

-- Seguran√ßa: novos players
task.spawn(function()
    while true do
        task.wait(2)
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer and not ESP[plr] then
                addPlayer(plr)
            end
        end
    end
end)
